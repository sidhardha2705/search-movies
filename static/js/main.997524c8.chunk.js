(this["webpackJsonpsearch-movies"]=this["webpackJsonpsearch-movies"]||[]).push([[0],{129:function(e,t,n){},130:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var i,r,a,c=n(0),o=n.n(c),s=n(18),l=n.n(s),d=(n(129),n(130),n(55)),j=n(19),b=n(182),u=n(179),h=n(183),m=n(185),O=n(201),x=n(83),v=n(200),g="\n  id\n  title\n  poster(size: W342)\n  rating\n",p=Object(v.a)(i||(i=Object(x.a)(["\n  query SearchMovies($term: String!) {\n    search(term: $term, first: 20) {\n      edges {\n        node {\n          ... on Movie {\n           ","\n           \n          }\n        }\n      }\n    }\n  }\n"])),g),f=Object(v.a)(r||(r=Object(x.a)(["\n  {\n    movies {\n      popular(first: 10) {\n        edges {\n          node {\n            ","\n          }\n        }\n      }\n    }\n  }\n"])),g),w=Object(v.a)(a||(a=Object(x.a)(["\n  query FetchSingleMovie($id: String!) {\n    movies {\n      movie(id: $id) {\n        title\n        id\n        poster(size: W500)\n        rating\n        releaseDate\n        overview\n        rating\n      }\n    }\n  }\n"]))),N=n(110),y=n.n(N),C=n.p+"static/media/Spinner.255ff8bc.svg",k=n(5),S=Object(u.a)({image:{width:75,height:75},container:{textAlign:"center",width:"100%"}}),B=function(){var e=S();return Object(k.jsx)("div",{className:e.container,children:Object(k.jsx)("img",{className:e.image,alt:"Loaing",src:C})})},F=Object(u.a)({root:{display:"flex",justifyContent:"space-between"},detailsContainer:{padding:"1.5rem",textAlign:"left"},link:{textDecoration:"none",color:"inherit"},actionContainer:{textAlign:"left",marginBottom:"2rem"}}),D=function(e){var t=e.match,n=Object(b.a)(w,{variables:{id:t.params.id}}),i=n.loading,r=n.error,a=n.data,c=F();if(i)return Object(k.jsx)(B,{});if(r)return Object(k.jsx)("div",{children:"There was an error fetching this movie"});var o=a.movies.movie,s=o.title,l=o.poster,j=o.overview,u=o.rating,x=o.releaseDate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:c.actionContainer,children:Object(k.jsx)(d.b,{className:c.link,to:"/",children:Object(k.jsx)(h.a,{variant:"outlined",startIcon:Object(k.jsx)(y.a,{}),children:"Go back"})})}),Object(k.jsxs)("div",{className:c.root,children:[Object(k.jsx)("img",{className:c.poster,src:l,alt:s}),Object(k.jsxs)("div",{className:c.detailsContainer,children:[Object(k.jsx)(m.a,{variant:"h4",gutterBottom:!0,children:s}),Object(k.jsx)(m.a,{variant:"h6",children:new Date(x).getFullYear()}),Object(k.jsx)(O.a,{readOnly:!0,defaultValue:u,max:10}),Object(k.jsx)(m.a,{variant:"body1",gutterBottom:!0,children:j})]})]})]})},A=n(44),I=n(113),M=new(n(114).a),z=Object(c.createContext)([]),W=function(e){var t=e.children,n=M.get("viewed_movies"),i=Object(c.useState)(n||[]),r=Object(A.a)(i,2),a=r[0],o=r[1];return Object(k.jsx)(z.Provider,{value:[a,function(e){var t=a.includes(e)?a.filter((function(t){return t!==e})):[].concat(Object(I.a)(a),[e]);M.set("viewed_movies",t),o(t)}],children:t})},$=n(186),_=n(187),q=n(188),E=function(e){var t=e.id,n=e.poster,i=e.title,r=e.viewed,a=e.onClick,c=Object(u.a)((function(e){return{root:{position:"relative",maxWidth:200,textDecoration:"none",margin:"auto"},media:{height:250},link:{textDecoration:"none"},title:{position:"absolute",top:"80%",left:"50%",width:"100%",transform:"translate(-50%, -50%)",color:"white",zIndex:"2"},tint:{position:"absolute",backgroundColor:e.colors.tint[r?"secondary":"primary"],top:"0",left:"0",bottom:"0",right:"0",zIndex:"1"}}}))();return Object(k.jsx)(d.b,{onClick:a,className:c.link,to:"/".concat(t),children:Object(k.jsx)($.a,{className:c.root,children:Object(k.jsxs)(_.a,{children:[Object(k.jsx)(q.a,{className:c.media,image:n,title:i}),Object(k.jsx)(m.a,{className:c.title,gutterBottom:!0,variant:"h6",children:i}),Object(k.jsx)("div",{className:c.tint,children:"\xa0"})]})})},t)},G=n(189),J=Object(u.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function P(e){var t=e.children,n=J();return Object(k.jsx)("div",{className:n.root,children:Object(k.jsx)(G.a,{container:!0,spacing:3,children:o.a.Children.map(t,(function(e){if(e)return Object(k.jsx)(G.a,{className:n.child,item:!0,xs:6,sm:3,children:e})}))})})}var T=function(){var e=Object(b.a)(f),t=e.loading,n=e.error,i=e.data,r=Object(c.useContext)(z),a=Object(A.a)(r,2),o=a[0],s=a[1];return t?Object(k.jsx)(B,{}):n?Object(k.jsx)("div",{children:"Error fetching popular movies"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(m.a,{variant:"h4",gutterBottom:!0,children:"Popular movies right now"}),Object(k.jsx)(P,{children:i.movies.popular.edges.map((function(e){var t=e.node;return Object(k.jsx)(E,{id:t.id,poster:t.poster,title:t.title,onClick:function(){return s(t.id)},viewed:o.includes(t.id)},t.id)}))})]})},H=n(190),L=n(197),V=Object(u.a)({resultsContainer:{minHeight:"30rem",margin:"2rem auto"},error:{color:"red"}}),Y=function(){var e=Object(c.useState)(""),t=Object(A.a)(e,2),n=t[0],i=t[1],r=Object(H.a)(p),a=Object(A.a)(r,2),o=a[0],s=a[1],l=s.loading,d=s.data,j=Object(c.useContext)(z),b=Object(A.a)(j,2),u=b[0],h=b[1],O=V();Object(c.useEffect)((function(){var e=setTimeout((function(){o({variables:{term:n}})}),800);return function(){return clearInterval(e)}}),[n,o]);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(m.a,{variant:"h4",gutterBottom:!0,children:"Start searching for a movie"}),Object(k.jsx)(L.a,{autoFocus:!0,onChange:function(e){return i(e.target.value)},label:"Search movies",type:"search",variant:"outlined"}),Object(k.jsx)("div",{className:O.resultsContainer,children:0===(null===d||void 0===d?void 0:d.search.edges.length)?Object(k.jsx)(m.a,{className:O.error,variant:"body2",children:"No results found, try modifying the search-term!"}):l&&n.length>0?Object(k.jsx)(B,{}):Object(k.jsx)(P,{children:null===d||void 0===d?void 0:d.search.edges.map((function(e){var t=e.node;return"Movie"===t.__typename?Object(k.jsx)(E,{id:t.id,poster:t.poster,title:t.title,viewed:u.includes(t.id),onClick:function(){return h(t.id)}},t.id):null}))})})]})},K=function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Y,{}),Object(k.jsx)(T,{})]})},Q=n(191),R=n(192),U=n(112),X=Object(U.a)({breakpoints:{values:{xs:0,sm:700,md:1060,lg:1380,xl:1920}},colors:{tint:{primary:"#00000099",secondary:"#000000e0"}}});var Z=function(){return Object(k.jsx)(d.a,{children:Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(W,{children:Object(k.jsx)(Q.a,{theme:X,children:Object(k.jsx)(R.a,{maxWidth:"md",children:Object(k.jsxs)(j.c,{children:[Object(k.jsx)(j.a,{exact:!0,path:"/:id",component:D}),Object(k.jsx)(j.a,{exact:!0,path:"/",component:K})]})})})})})})},ee=n(196),te=n(198),ne=n(199),ie=new te.a({cache:new ne.a,uri:"https://tmdb.apps.quintero.io/"});l.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(ee.a,{client:ie,children:Object(k.jsx)(Z,{})})}),document.getElementById("root"))}},[[145,1,2]]]);
//# sourceMappingURL=main.997524c8.chunk.js.map